<!DOCTYPE html>
<html>
<head>
    <title>Sorozatszám Ellenőrző</title>
    <script>
        // Helyi adatok (offline)
        const stolenDevices = {
            "123456": { type: "Laptop", found: false },
            "654321": { type: "Telefont", found: true }
        };

        // Publikus szerver URL-je
        const SERVER_URL = 'http://<PUBLIC_IP_OR_DDNS_DOMAIN>:5000'; // Cseréld le a saját IP/címre

        async function checkSerialNumber() {
            const serialNumber = document.getElementById('serialNumber').value.trim();
            if (!serialNumber) {
                alert("Kérlek, add meg a sorozatszámot!");
                return;
            }

            // Offline ellenőrzés
            let offlineResult = "Nincs találat a helyi listán.";
            if (stolenDevices[serialNumber]) {
                offlineResult = `A megadott sorozatszám szerepel az ellopott listán (offline). Típus: ${stolenDevices[serialNumber].type}`;
            }

            // Online ellenőrzés
            let onlineResult = "Nincs találat az online listán.";
            try {
                const response = await fetch(`${SERVER_URL}/search/${serialNumber}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (response.status === 200) {
                    const device = await response.json();
                    onlineResult = `A megadott sorozatszám szerepel az ellopott listán (online). Típus: ${device.device_type}`;
                } else if (response.status === 404) {
                    onlineResult = "A megadott sorozatszám nem szerepel az ellopott listán (online).";
                } else {
                    const errorData = await response.json();
                    onlineResult = `Hiba történt: ${errorData.error || response.statusText}`;
                }
            } catch (error) {
                onlineResult = `Hiba történt az online ellenőrzés során: ${error.message}`;
            }

            alert(`${offlineResult}\n${onlineResult}`);
        }
    </script>
</head>
<body>
    <h1>Sorozatszám Ellenőrző</h1>
    <input type="text" id="serialNumber" placeholder="Írd be a sorozatszámot">
    <button onclick="checkSerialNumber()">Ellenőriz</button>
</body>
</html>
